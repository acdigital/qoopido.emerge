(function(t,e){"use strict";var i="qoopido/jquery/plugins/emerge",o=function o(){return e.qoopido.shared.prepareModule(i,t,arguments,!0)};"function"==typeof define&&define.amd?define(["../../base","../../unique","jquery"],o):o(e.qoopido.base,e.qoopido.unique,e.jQuery)})(function(t,e,i,o,r,n){"use strict";var _,s,l,v="emerge",p={interval:50,threshold:"auto",recur:!0,auto:.5,visibility:!0},a=i(o),h="emerged."+v,u="demerged."+v,g="resize orientationchange";if("CSS1Compat"!==r.compatMode)throw"This plugin will not work correctly in quirks mode, please ensure your Browser is in standards mode.";return i.fn[v]=function(t){return this.each(function(){l.create(this,t)})},_=function _(t){var e,i=l._elements[t];for(e in i)i[e]._checkState!==n&&i[e]._checkState();0===i.length&&(o.clearInterval(l._intervals[t]),delete l._intervals[t])},s=function(){l._viewport.left=0,l._viewport.top=0,l._viewport.right=a.width(),l._viewport.bottom=a.height()},l=t.extend({_viewport:{left:0,top:0,right:a.width(),bottom:a.height()},_intervals:{},_elements:{},_constructor:function(t,r){var s=this;r=i.extend(!0,{},p,r||{}),"auto"===r.threshold&&delete r.threshold,l._intervals[r.interval]===n&&(l._elements[r.interval]=l._elements[r.interval]||{length:0},l._intervals[r.interval]=o.setInterval(function(){_(r.interval)},r.interval)),s._element=t,s._object=i(t),s._settings=r,s._viewport={left:0,top:0,right:0,bottom:0},s._state=!1,s._priority=2,s._uuid=e.uuid(),l._elements[r.interval][s._uuid]=s,l._elements[r.interval].length++,a.on(g,function(){s._onResize.call(s)}),s._onResize()},_checkState:function(){var t,e=this,i=!1,o=2;!e._object.is(":visible")||"hidden"===e._element.style.visibility&&e._settings.visibility!==!1||(t=e._element.getBoundingClientRect(),(t.left>=e._viewport.left&&t.top>=e._viewport.top&&t.left<=e._viewport.right&&t.top<=e._viewport.bottom||t.right>=e._viewport.left&&t.bottom>=e._viewport.top&&t.right<=e._viewport.right&&t.bottom<=e._viewport.bottom)&&((t.left>=l._viewport.left&&t.top>=l._viewport.top&&t.left<=l._viewport.right&&t.top<=l._viewport.bottom||t.right>=l._viewport.left&&t.bottom>=l._viewport.top&&t.right<=l._viewport.right&&t.bottom<=l._viewport.bottom)&&(o=1),i=!0)),(i!==e._state||o!==e._priority)&&(e._state=i,e._priority=o,e._changeState())},_changeState:function(){var t,e=this;e._settings.recur!==!0&&e._remove(),e._state===!0?(t=i.Event(h),t.priority=e._priority):t=i.Event(u),e._object.trigger(t)},_remove:function(){var t=this;delete l._elements[t._settings.interval][t._uuid],l._elements[t._settings.interval].length--},_onResize:function(){var t=this,e=t._settings.threshold||a.width()*t._settings.auto,i=t._settings.threshold||a.height()*t._settings.auto;t._viewport.left=l._viewport.left-e,t._viewport.top=l._viewport.top-i,t._viewport.right=l._viewport.right+e,t._viewport.bottom=l._viewport.bottom+i}}),a.on(g,s),l},window,document);