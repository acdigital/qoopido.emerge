(function(e,t){"use strict";var r=function r(){return t.qoopido.shared.module.initialize("emitter",e,arguments)};"function"==typeof define&&define.amd?define(["./base"],r):r(t.qoopido.base)})(function(e,t,r,n,o){"use strict";var i=/^(_|extend$|create$|on$|one$|off$|emit$|get.+)/;return e.extend({_mapped:null,_listener:null,_constructor:function(){var e,t=this;t._listener={},t._mapped={};for(e in t)"function"==typeof t[e]&&i.test(e)===!1&&(t[e]=t._map(e))},_map:function(e){var t=this,r=e.charAt(0).toUpperCase()+e.slice(1);return t._mapped[e]=t[e],function(){var n,o=Array.prototype.slice.call(arguments);return t.emit.apply(t,["pre"+r,o]),n=t._mapped[e].apply(t,o),t.emit.apply(t,["post"+r,n,o]),n}},on:function(e,t){var r=this;return e!==o&&t!==o&&(r._listener[e]=r._listener[e]||[]).push(t),r},one:function(e,t){var r=this;return e!==o&&t!==o&&(t.once=!0,r.on(e,t)),r},off:function(e,t){var r,n=this;if(e!==o)if(n._listener[e]=n._listener[e]||[],t)for(;-1!==(r=n._listener[e].indexOf(t));)n._listener[e].splice(r,1);else n._listener[e].length=0;return n},emit:function(e){var t,r,n=this,i=Array.prototype.slice.call(arguments).splice(1);if(e!==o)for(n._listener[e]=n._listener[e]||[],t=0;(r=n._listener[e][t])!==o;t++)r.apply(n,i),r.once===!0&&(n._listener[e].splice(t,1),t--);return n}})},window);